all:
	nasm -felf32 startup.asm -o startup32.o
	nasm -felf64 startup.asm -o startup64.o
	$(CC) -m32 -I "../../programsapi/include" -ffreestanding -fno-PIE -mno-red-zone -mno-mmx -mno-sse -mno-sse2 -c main.c -o ./mn32.o -D __SANDEROSUSB
	$(CC) -m64 -I "../../programsapi/include" -ffreestanding -fno-PIE -mno-red-zone -mno-mmx -mno-sse -mno-sse2 -c main.c -o ./mn64.o -D __SANDEROSUSB
	$(CC) -m32 -ffreestanding -nostdlib -T ../../programsapi/linker32.ld -fno-PIE startup32.o ./mn32.o ../../programsapi/bin/exit32.o ../../programsapi/bin/cls32.o ../../programsapi/bin/scanline32.o ../../programsapi/bin/start_tcp_session32.o ../../programsapi/bin/send_tcp_message32.o ../../programsapi/bin/hang32.o ../../programsapi/bin/convert32.o ../../programsapi/bin/puts32.o ../../programsapi/bin/putsc32.o ../../programsapi/bin/__stack_chk_fail32.o ../../programsapi/bin/printf32.o ../../programsapi/bin/strlen32.o -o ../../bin/programs/32bit/chat.bin
	$(CC) -m64 -ffreestanding -nostdlib -T ../../programsapi/linker64.ld -fno-PIE startup64.o ./mn64.o ../../programsapi/bin/exit64.o ../../programsapi/bin/cls64.o ../../programsapi/bin/scanline64.o ../../programsapi/bin/start_tcp_session64.o ../../programsapi/bin/send_tcp_message64.o ../../programsapi/bin/hang64.o ../../programsapi/bin/convert64.o ../../programsapi/bin/puts64.o ../../programsapi/bin/putsc64.o ../../programsapi/bin/__stack_chk_fail64.o ../../programsapi/bin/printf64.o ../../programsapi/bin/strlen64.o -o ../../bin/programs/64bit/chat.bin
	rm *.o